## https://realpython.com/python-requests/
## https://developer.github.com/v3/search/#search-repositories
## https://pypi.org/project/PyGithub/

## 0d7387776c097833f27e258050b48e38690f7b52
## +language:python

import requests

url = 'https://api.github.com/search/repositories'
access_token = 'token 0d7387776c097833f27e258050b48e38690f7b52'
# query_list = [
#     'botnet+language:python',
#     'ransomware+language:python',
#     'keylogger+language:python',
#     'virus+language:python'
#     ]
language = '+language:python'
query_list = [
    'sudoku' + language,
]

# for i in query_list:
#     response = requests.get(
#         url,
#         params={'q':query_list[i]},
#         headers={'Authorization': access_token}
#     )

response = requests.get(
        url,
        params={'q':query_list},
        headers={'Authorization': access_token,
        'Accept': 'application/vnd.github.v3.text-match+json'}
    )

## collect the response and parse it
json_response = response.json()
## isolate the items in the request one by one for query debugging
repository = json_response['items'][0]      
# print(repository)      ## uncomment this for query debugging
print(f'Text matches: {repository["text_matches"]}')
## pretty display for the output of the request
for i in json_response['items']:
    print(f'Full project name: {i["full_name"]}')
    print(f'Project Language: {i["language"]}')
    print(f'Query matched: {repository["text_matches"]}')
    print(f'Repository description: {i["description"]}')
    print(f'Repository location: {i["html_url"]}')
    print('\n')
